{% extends "base.html" %}
{% load static %}
{% block title %}Perfil de {{ usuario.first_name }} {{ usuario.last_name }} | EduLink{% endblock %}

{% block content %}
<div class="hero-wrap p-4 mb-4">
  <h3 class="fw-bold">👨‍🏫 Perfil de {{ usuario.first_name }} {{ usuario.last_name }}</h3>
  <p class="text-muted">Conocé más sobre este maestro antes de enviarle una solicitud.</p>
</div>

<div class="feature-card p-4">
  <!-- Foto -->
  <div class="mb-3 text-center">
    {% if usuario.foto_perfil %}
      <img src="{{ usuario.foto_perfil.url }}" class="rounded-circle" width="150" height="150" alt="Foto de perfil">
    {% else %}
      <img src="{% static 'img/default-avatar.png' %}" class="rounded-circle" width="150" height="150" alt="Avatar por defecto">
    {% endif %}
  </div>

  <!-- Datos de Usuario -->
  <h4 class="fw-bold">{{ usuario.first_name }} {{ usuario.last_name }}</h4>
  <p class="text-muted mb-1">📧 {{ usuario.email }}</p>
  {% if usuario.telefono %}<p class="text-muted mb-1">📱 {{ usuario.telefono }}</p>{% endif %}
  {% if usuario.fecha_nacimiento %}<p class="text-muted mb-1">🎂 {{ usuario.fecha_nacimiento }}</p>{% endif %}

  <!-- Ubicación -->
  <p class="text-muted mb-1">📍 
    {% if usuario.localidad %}{{ usuario.localidad.nombre }}, {% endif %}
    {% if usuario.municipio %}{{ usuario.municipio.nombre }}, {% endif %}
    {% if usuario.departamento %}{{ usuario.departamento.nombre }}, {% endif %}
    {% if usuario.provincia %}{{ usuario.provincia.nombre }}{% endif %}
  </p>
  {% if usuario.calle %}
    <p class="text-muted">🏠 {{ usuario.calle }}</p>
  {% endif %}

  {% if usuario.bio %}
    <div class="mt-3">
      <h6 class="fw-bold">Sobre mí</h6>
      <p>{{ usuario.bio }}</p>
    </div>
  {% endif %}

  <hr>

  <!-- Datos de Maestro -->
  <h6 class="fw-bold">Modalidad</h6>
  <p>{{ maestro.get_modalidad_display }}</p>

  <h6 class="fw-bold">Precio por hora</h6>
  <p>💲 {{ maestro.precio_hora }}</p>

  <h6 class="fw-bold">Materias</h6>
  <p>
    {% for m in maestro.materias.all %}
      <span class="badge-chip">{{ m.nombre }}</span>
    {% empty %}
      <span class="text-muted">No especificado</span>
    {% endfor %}
  </p>

  <h6 class="fw-bold">Idiomas</h6>
  <p>
    {% for i in maestro.idiomas.all %}
      <span class="badge-chip">{{ i.nombre }}</span>
    {% empty %}
      <span class="text-muted">No especificado</span>
    {% endfor %}
  </p>

  {% if maestro.descripcion %}
    <div class="mt-3">
      <h6 class="fw-bold">Descripción</h6>
      <p>{{ maestro.descripcion }}</p>
    </div>
  {% endif %}

  {% if maestro.cv %}
    <div class="mt-3">
      <a href="{{ maestro.cv.url }}" class="btn btn-outline-primary" target="_blank">📄 Ver CV</a>
    </div>
  {% endif %}

  <!-- Botones -->
  <div class="mt-4">
    <a href="{% url 'buscar_clases' %}" class="btn btn-secondary">⬅️ Volver</a>
    <a href="#" class="btn btn-acento">📩 Enviar solicitud</a>
  </div>
</div>
{% endblock %}
